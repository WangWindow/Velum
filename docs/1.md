# 1 实训目的及内容简介

## 1.1 实训目的

本次实训以“Velum 学生心理评测数据分析系统”为载体，围绕**心理测评业务**与**数据分析应用**，完成从需求理解、架构设计到前后端实现与部署的完整软件工程训练。主要目的如下：

1. **掌握前后端分离架构的工程化落地**
   - 后端以 Web API 形式提供统一数据服务，前端（Web 与桌面端）通过 HTTP/HTTPS 调用。
   - 形成清晰的分层结构（Controller / Service / Data Access / Model），便于扩展与维护。

2. **熟悉身份认证与权限控制在业务系统中的实现**
   - 基于 JWT 的登录态与接口鉴权。
   - 角色区分（管理员/普通用户），路由与接口双重约束。

3. **训练“测评数据结构化 + 统计分析 + 可视化”的完整链路思维**
   - 问卷模板结构化（题目、选项、分值），测评提交后形成可分析的数据资产。
   - 提供面向管理端的仪表盘统计（总量、分布、趋势等）与查询能力。

4. **引入 AI 辅助分析，提高系统智能化与产品亮点**
   - 将用户对话与测评结果可选地交由大模型生成分析文本。
   - 支持流式输出（Streaming），优化交互体验。

5. **实践跨平台交付与部署**
   - Web 版：通过 Vite 构建静态资源，可部署到 Vercel 等平台。
   - 桌面版：通过 Tauri 打包跨平台应用（Windows/macOS/Linux）。
   - 后端：.NET 服务支持 Docker/云平台部署，配置通过 JSON 与环境变量管理。

## 1.2 实训内容

本项目属于“学生心理评测数据分析系统”，面向两类核心角色：

- **普通用户（学生/被测者）**：登录、进行心理测评、查看个人记录、进行 AI 对话/心理分析、设置个人信息、小游戏等。
- **管理员（辅导员/心理老师/系统管理员）**：用户管理、任务管理、量表/问卷管理、日志审计、系统设置、数据统计与分析。

结合现有代码实现，本次实训内容可归纳为以下模块（对应后端接口与前端页面）：

1. **账号体系与安全机制**
   - 登录/注册（JWT 认证）
   - 管理员与用户角色区分（接口鉴权 + 前端路由守卫）
   - 可选的 RSA 密码传输加密：前端通过获取公钥并加密，后端解密后校验

2. **心理测评（问卷/量表）与结果存储**
   - 问卷模板（题目 JSON）管理
   - 用户提交答案，保存为“测评记录（Assessment）”
   - 结果包含：总分、解释文本、详细答案 JSON、AI 分析 JSON（可选）

3. **AI 对话与分析（支持流式返回）**
   - 会话（ChatSession）与消息（ChatMessage）结构化存储
   - 支持普通请求与 streaming 请求两种交互方式

4. **后台数据统计与可视化**
   - 管理员仪表盘：统计指标、趋势与分布数据
   - 结合前端 ECharts 等组件完成可视化呈现

5. **系统配置与运维能力**
   - 数据库：EF Core + SQLite（默认），并支持迁移（Migrate）
   - 配置：appsettings.json / appsettings.local.json / 环境变量；同时支持从数据库表读取部分配置（如 AI Key/Model）
   - 日志：系统日志表（SystemLog）用于审计与追踪

## 1.3 实训环境与技术选型概览

### 1.3.1 后端技术栈

- 语言与框架：C# / ASP.NET Core Web API
- ORM：Entity Framework Core
- 数据库：SQLite（默认连接 `Data Source=velum.db`）
- 鉴权：JWT Bearer
- API 文档：OpenAPI/Swagger（非生产环境启用）
- AI：基于 OpenAI SDK 的 ChatClient（支持流式输出），并允许替换 BaseUrl 指向 DeepSeek 等兼容服务

### 1.3.2 前端技术栈

- 框架：Vue 3 + TypeScript
- 构建：Vite
- 状态管理：Pinia
- 路由：Vue Router（Hash 模式）
- 可视化：ECharts / vue-echarts / vue-chartjs
- 密码加密：jsencrypt（配合后端 RSA）

### 1.3.3 桌面端（可选交付形态）

- 框架：Tauri 2（Web 前端 + 原生壳）
- 构建：通过 `bun run dev/build` 驱动前端构建与打包

## 1.4 主要交付物

- 需求与设计文档（本报告）：含用例、数据流、ER 图、流程图等
- 后端服务：提供认证、测评、聊天、统计、配置、日志等接口
- 前端管理后台/用户端：Web 页面（同时可作为 Tauri 桌面端 UI）
- 部署流程说明：后端部署、前端 Web 部署、Tauri 打包发布

## 1.5 截图占位（后续补充）

> 说明：以下位置请在最终报告中插入对应界面截图。

- 【截图占位：登录页（/login），展示账号输入、角色进入】
- 【截图占位：管理员仪表盘（/admin/dashboard），展示统计卡片与图表】
- 【截图占位：用户首页（/user/dashboard）】
- 【截图占位：用户测评页面（/user/assessment），展示问卷答题】
- 【截图占位：AI 对话页面（/user/chat），展示流式输出效果】
- 【截图占位：管理员-用户管理（/admin/users）】
- 【截图占位：管理员-量表/问卷管理（/admin/scales）】
- 【截图占位：管理员-日志审计（/admin/logs）】
